<!DOCTYPE html>
<html lang="no">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Adventskalender 2025</title>
  <link rel="stylesheet" href="styles.css" />
  <!-- Your app logic (routing, grid rendering, etc.) can stay in app.js.
       Firebase + login + leaderboard is in main.js and must load as a module. -->
  <script src="app.js" defer></script>
  <script src="main.js" defer type="module"></script>
</head>

<body>
  <header>
  <h1>🎄 Adventskalender 2025</h1>
  <div class="sub" id="dateInfo">Alle dager låst opp for redigering (gjenopprett låsing senere)</div>
  <div class="sub scoreline" id="scoreLine">Totale poeng: 0</div>
  <div class="legend">
    <span class="dot open"></span>Åpen
    <a href="#/leaderboard" class="btn" style="margin-left: 1rem;">🏆 Leaderboard</a>
    <!-- Ny knapp -->
    <button class="btn" id="btnLogout" style="margin-left: .5rem; display:none;">Logg ut</button>
  </div>
</header>


  <main>
  <!-- Login View -->
<section id="login" class="view">
  <div class="card">
    <h2>Velkommen til Adventskalender 2025!</h2>

    <div class="tabs" style="display:flex; gap:.6rem; margin-bottom:.6rem;">
      <button class="btn" id="tabSignIn">Logg inn</button>
      <button class="btn" id="tabSignUp">Registrer</button>
    </div>

    <!-- Sign in -->
    <div id="signInForm" class="login-form">
      <div class="form-group">
        <label for="signinUsername">Brukernavn</label>
        <input id="signinUsername" type="text" placeholder="dittbrukernavn" />
      </div>
      <div class="form-group">
        <label for="signinPassword">Passord</label>
        <input id="signinPassword" type="password" placeholder="••••••••" />
      </div>
      <button class="btn primary" id="btnSignIn">Logg inn</button>
      <div id="loginError" class="status" aria-live="polite" style="margin-top:.6rem;"></div>
    </div>

    <!-- Sign up -->
    <div id="signUpForm" class="login-form" style="display:none;">
      <div class="form-group">
        <label for="signupUsername">Velg brukernavn (unikt)</label>
        <input id="signupUsername" type="text" placeholder="f.eks. snofnugg" maxlength="20" />
      </div>
      <div class="form-group">
        <label for="signupPassword">Passord (min. 6 tegn)</label>
        <input id="signupPassword" type="password" placeholder="••••••••" />
      </div>
      <button class="btn primary" id="btnSignUp">Opprett bruker</button>
      <div id="signupError" class="status" aria-live="polite" style="margin-top:.6rem;"></div>
    </div>

    <div class="login-info" style="margin-top:1rem;">
      <h3>Info</h3>
      <ul>
        <li><strong>Innlogging:</strong> Kun brukernavn + passord</li>
        <li><strong>Brukernavn:</strong> 3–20 tegn: bokstaver, tall, _ eller -</li>
        <li><strong>Passord:</strong> Minst 6 tegn</li>
      </ul>
    </div>
  </div>
</section>


    <!-- Home View -->
    <section id="home" class="view">
      <div class="grid" id="grid"></div>
    </section>

    <!-- Task View -->
    <section id="task" class="view">
      <div class="card">
        <div class="task-head">
          <h2 id="taskTitle">Dag X</h2>
          <div class="controls">
            <a class="btn" href="#/">← Alle dager</a>
          </div>
        </div>
        <div class="task-body" id="taskBody"></div>
        <div id="taskMedia" class="task-media"></div>

        <div class="hint-card" id="hintCard" style="display:none;">
          <div class="hint-note" id="hintNote">Å avsløre et hint halverer poengene for denne dagen (rundet til nærmeste hele tall).</div>
          <button id="hintBtn" class="btn" style="margin-top:.6rem;">Avslør hint</button>
          <div class="hint-text" id="hintText" style="display:none;"></div>
        </div>

        <div class="answer-card">
          <div class="answer-row">
            <input id="answerInput" type="text" placeholder="Skriv inn svaret ditt" autocomplete="off" />
            <button id="checkBtn" class="btn primary" aria-label="Sjekk svar">Sjekk</button>
          </div>
          <div id="answerStatus" class="status" aria-live="polite">Skriv inn svaret og trykk Sjekk (eller trykk Enter).</div>
        </div>
      </div>
      <div style="display:flex; gap:.6rem; margin-top: 1rem; flex-wrap:wrap">
        <a id="prevLink" class="btn" href="#/">← Forrige</a>
        <a id="nextLink" class="btn primary" href="#/">Neste →</a>
      </div>
    </section>

    <!-- Leaderboard View -->
    <section id="leaderboard" class="view">
      <div class="card">
        <div class="task-head">
          <h2>🏆 Leaderboard</h2>
          <div class="controls">
            <a class="btn" href="#/">← Tilbake</a>
          </div>
        </div>

        <div class="leaderboard-content">
          <p>Se hvordan du rangerer mot andre spillere!</p>
          <ol id="leaderboardList" class="leaderboard-list"></ol>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <span id="todayText"></span>
  </footer>

  <div class="snow" aria-hidden="true" id="snow"></div>
</body>
</html>
